<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
	    tex2jax: {
	        inlineMath: [['$','$'], ['\(','\)']],
	        processEscapes: true
	    }
	});
    </script>
</head><h1>扶苏的问题</h1>
<h2>题目描述</h2>
<p>给定一个长度为 $n$ 的序列 $a$，要求支持如下三个操作：</p>
<ol>
<li>给定区间 $[l, r]$，将区间内每个数都修改为 $x$。</li>
<li>给定区间 $[l, r]$，将区间内每个数都加上 $x$。</li>
<li>给定区间 $[l, r]$，求区间内的最大值。</li>
</ol>
<h2>输入输出格式</h2>
<h4>输入格式</h4>
<p>第一行是两个整数，依次表示序列的长度 $n$ 和操作的个数 $q$。<br />
第二行有 $n$ 个整数，第 $i$ 个整数表示序列中的第 $i$ 个数 $a_i$。<br />
接下来 $q$ 行，每行表示一个操作。每行首先有一个整数 $op$，表示操作的类型。
- 若 $op = 1$，则接下来有三个整数 $l, r, x$，表示将区间 $[l, r]$ 内的每个数都修改为 $x$。
- 若 $op = 2$，则接下来有三个整数 $l, r, x$，表示将区间 $[l, r]$ 内的每个数都加上 $x$。
- 若 $op = 3$，则接下来有两个整数 $l, r$，表示查询区间 $[l, r]$ 内的最大值。</p>
<h4>输出格式</h4>
<p>对于每个 $op = 3$ 的操作，输出一行一个整数表示答案。</p>
<h2>输入输出样例</h2>
<h4>输入样例 #1</h4>
<p>6 6
1 1 4 5 1 4
1 1 2 6
2 3 4 2
3 1 4
3 2 3
1 1 6 -1
3 1 6</p>
<h4>输出样例 #1</h4>
<p>7
6
-1</p>
<h4>输入样例 #2</h4>
<p>4 4
10 4 -3 -7
1 1 3 0
2 3 4 -4
1 2 4 -9
3 1 4</p>
<h4>输出样例 #2</h4>
<p>0</p>
<h2>说明</h2>
<h3>数据规模与约定</h3>
<ul>
<li>对于 $10\%$ 的数据，$n = q = 1$。</li>
<li>对于 $40\%$ 的数据，$n, q \leq 10^3$。</li>
<li>对于 $50\%$ 的数据，$0 \leq a_i, x \leq 10^4$。</li>
<li>对于 $60\%$ 的数据，$op \neq 1$。</li>
<li>对于 $90\%$ 的数据，$n, q \leq 10^5$。</li>
<li>对于 $100\%$ 的数据，$1 \leq n, q \leq 10^6$，$1 \leq l, r \leq n$，$op \in {1, 2, 3}$，$|a_i|, |x| \leq 10^9$。</li>
</ul>
<h3>提示</h3>
<p>请注意大量数据读入对程序效率造成的影响。</p>