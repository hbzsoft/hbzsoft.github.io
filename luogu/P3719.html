<h1>[AHOI2017初中组] rexp</h1>
<h2>题目背景</h2>
<p>为了解决形形色色的字符串匹配问题，正则表达式是一个强有力的工具。正则表达式通过定义一套符号体系，能够表示出需要查找的字符串所具有的性质。如 <code>a|aa</code> 能匹配 <code>a</code> 或 <code>aa</code>，<code>(a|b)c</code> 能匹配 <code>ac</code> 或 <code>bc</code>。</p>
<h2>题目描述</h2>
<p>完整的正则表达式过于复杂，在这里我们只考虑由 <code>(</code>、<code>)</code>、<code>|</code> 和 <code>a</code> 组成的正则表达式。运算遵循下列法则：</p>
<ol>
<li>
<p>有括号时，我们总是先算括号内的部分；</p>
</li>
<li>
<p>当两个字符串（或由括号定义的子串）间没有符号时，我们总把它们连起来作为一个整体；</p>
</li>
<li>
<p><code>|</code> 是或连接符，表示两边的字符串任取其一，若同一层里有多个或连接符，可以看作在这些或连接符所分开的若干字符串里任取其一。</p>
</li>
</ol>
<p>例如，<code>(aaa)aa|aa|(a(aa)a)</code>、<code>(aaaaa)|(aa)|aaaa</code> 和 <code>aaaaa|aaaa|aa</code> 是等价的，它们都能匹配长度为 $2,4$ 或 $5$ 的全 <code>a</code> 字符串。</p>
<p>下面给定一个简化正则表达式，试编程计算它最多能匹配多长的全 <code>a</code> 字符串。</p>
<h2>输入输出格式</h2>
<h4>输入格式</h4>
<p>输入一行一个合法的简化正则表达式。</p>
<h4>输出格式</h4>
<p>一行一个整数，表示能匹配的最长全 <code>a</code> 字符串长度。</p>
<h2>输入输出样例</h2>
<h4>输入样例 #1</h4>
<p>(aaa)aa|aa|(a(aa)a)</p>
<h4>输出样例 #1</h4>
<p>5</p>
<h4>输入样例 #2</h4>
<p>((a|aaa)|aa)|a</p>
<h4>输出样例 #2</h4>
<p>3</p>
<h4>输入样例 #3</h4>
<p>(a(aa|aaa)a|(a|aa))aa</p>
<h4>输出样例 #3</h4>
<p>7</p>
<h2>说明</h2>
<p><strong>【数据范围】</strong></p>
<p>对于 $20\%$ 数据，表达式长度不超过 $100$，且不存在括号。</p>
<p>对于 $40\%$ 数据，表达式长度不超过 $100$。</p>
<p>对于 $70\%$ 数据，表达式长度不超过 $2 \times 10^3$。</p>
<p>对于 $100\%$ 的数据，表达式长度不超过 $10^5$。</p>
<p>保证表达式合法（即 <code>|</code> 两端和括号内运算结果均非空字符串）。</p>