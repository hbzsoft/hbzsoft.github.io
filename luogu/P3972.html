<h1>[TJOI2014] 电影评分</h1>
<h2>题目描述</h2>
<p>小Z发明了一套新的电影评分系统。这套系统有三种操作:发布新电影、对电影评分、以及询问电影评分的排名。具体是这样运作的:如果是发布新电影,并且这部电影的有所主演之前均没有出现过,那么这部新电影的评分为0,否则这部电影的评分为<strong>最近一部</strong>与该电影<strong>至少有一个共同主演</strong>的电影的评分;如果是对电影进行评分,那么这部电影的评分就变成之前评分与新的评分的平均数;如果是查询排名,则根据评分输出相应排名。评分最高的为第一名。如果有多部电影分数相同,那么输出最早的一部。电影的评分在0到5之间。</p>
<h2>输入输出格式</h2>
<h4>输入格式</h4>
<p>输入的第一行是n,表示操作次数。接下来n行,每一行是以下三种操作之一：</p>
<ol>
<li>
<p>Q x:查询当前排名为x的电影ID</p>
</li>
<li>
<p>R ID x actor1 actor2 …· actorx:发布新电影ID,该电影有x个主演分别为 actor1, actor2,…’</p>
</li>
<li>
<p>C ID score:评分操作,表示对电影ID的评分为 score</p>
</li>
</ol>
<p>数据保证每个电影的ID不相同,且每部电影至多不超过5名主演。</p>
<p>1≤ actor1, actor2,··≤10^5</p>
<p>1≤ID≤10^5</p>
<h4>输出格式</h4>
<p>对于每一个查询操作,输出相应排名的电影的ID。</p>
<h2>输入输出样例</h2>
<h4>输入样例 #1</h4>
<p>10 
R 1 1 1 
R 2 2 1 2 
C 2 2 
R 3 1 2 
Q 1 
C 3 2 
C 1 5 
Q 1 
Q 2 
Q 3</p>
<h4>输出样例 #1</h4>
<p>2 
1 
3 
2</p>
<h2>说明</h2>
<h3>样例解释</h3>
<p>| Movie | 1 | 2 | 3 | 
| :-: | :-: | :-: | :-: | :-: | :-: |
| | 0 | - | - |
| | 0 | 0 | - |
| | 0 | 1 | - |
| | 0 | 1 | 1 |
| Q 1 =&gt; 2 | //Movie 2 wa|s released be|fore Movie 3 |
| | 0 | 1 | 1.5 |
| | 2.5 | 1 | 1.5 |
| Q 1 =&gt; 1 |
| Q 2 =&gt; 3 |
| Q 3 =&gt; 2 |</p>
<h3>数据范围</h3>
<p>对于 30% 的数据，n ≤ 100</p>
<p>对于 100% 的数据，n ≤ 10000</p>