<h1>[国家集训队] middle</h1>
<h2>题目描述</h2>
<p>一个长度为 $n$ 的序列 $a$，设其排过序之后为 $b$，其中位数定义为 $b_{n/2}$，其中 $a,b$ 从 $0$ 开始标号，除法下取整。</p>
<p>给你一个长度为 $n$ 的序列 $s$。</p>
<p>回答 $Q$ 个这样的询问：$s$ 的左端点在 $[a,b]$ 之间，右端点在 $[c,d]$ 之间的子区间中，最大的中位数。</p>
<p>其中 $a&lt;b&lt;c&lt;d$。</p>
<p>位置也从 $0$ 开始标号。</p>
<p>我会使用一些方式强制你在线。</p>
<h2>输入输出格式</h2>
<h4>输入格式</h4>
<p>第一行序列长度 $n$。</p>
<p>接下来 $n$ 行按顺序给出 $a$ 中的数。</p>
<p>接下来一行 $Q$。</p>
<p>然后 $Q$ 行每行 $a,b,c,d$，我们令上个询问的答案是 $x$（如果这是第一个询问则 $x=0$）。</p>
<p>令数组 $q={(a+x)\bmod n,(b+x)\bmod n,(c+x)\bmod n,(d+x)\bmod n}$。</p>
<p>将 $q$ 从小到大排序之后，令真正的要询问的 $a=q_0$，$b=q_1$，$c=q_2$，$d=q_3$。</p>
<p>输入保证满足条件。</p>
<h4>输出格式</h4>
<p>$Q$ 行依次给出询问的答案。</p>
<h2>输入输出样例</h2>
<h4>输入样例 #1</h4>
<p>5
170337785
271451044
22430280
969056313
206452321
3
3 1 0 2
2 3 1 4
3 1 4 0</p>
<h4>输出样例 #1</h4>
<p>271451044
271451044
969056313</p>
<h2>说明</h2>
<p>对于 $5\%$ 的数据，$n,Q \leq 100$；</p>
<p>对于另 $25\%$ 的数据，$n \leq 2000$；</p>
<p>对于 $100\%$ 的数据，$1\leq n \leq 20000$，$1\leq Q \leq 25000$，$1\leq a_i\leq 10 ^ 9$。</p>