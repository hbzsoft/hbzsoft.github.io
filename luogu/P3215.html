<h1>[HNOI2011] 括号修复 /  [JSOI2011]括号序列</h1>
<h2>题目描述</h2>
<p>一个合法的括号序列是这样定义的：</p>
<ol>
<li>空串是合法的。</li>
<li>如果字符串 <code>S</code> 是合法的，则<code>(S)</code>也是合法的。</li>
<li>如果字符串 <code>A</code> 和 <code>B</code> 是合法的，则 <code>AB</code> 也是合法的。</li>
</ol>
<p>现在给你一个长度为 $n$ 的由<code>(</code>和<code>)</code>组成的字符串，位置标号从 $1$ 到 $n$。对这个字符串有下列四种操作：</p>
<ul>
<li>
<p><code>Replace a b c</code>：将 $[a,b]$ 之间的所有括号改成 $c$。假设原来的字符串为：<code>))())())(</code>，那么执行操作 <code>Replace 2 7 (</code>  后原来的字符串变为：<code>)(((((()(</code>。</p>
</li>
<li>
<p><code>Swap a b</code>：将 $[a,b]$ 之间的字符串翻转。假设原来的字符串为：<code>))())())(</code>，那么执行操作 <code>Swap 3 5</code> 后原来的字符串变为：<code>))))(())(</code>。</p>
</li>
<li>
<p><code>Invert a b</code>：将 $[a,b]$ 之间的 <code>(</code> 变成 <code>)</code> ，<code>)</code> 变成 <code>(</code>。假设原来的字符串为：<code>))())())(</code>，那么执行操作 <code>Invert 4 8</code> 后原来的字符串变为：<code>))((()(((</code>。</p>
</li>
<li>
<p><code>Query a b</code>：询问 $[a,b]$ 之间的字符串至少要改变多少位才能变成合法的括号序列。改变某位是指将该位的 <code>(</code> 变成 <code>)</code> 或 <code>)</code> 变成 <code>(</code>。注意执行操作 <code>Query</code> 并不改变当前的括号序列。假设原来的字符串为：<code>))())())(</code>，那么执行操作 <code>Query 3 6</code> 的结果为 $2$，因为要将位置 $5$ 的<code>)</code>变成<code>(</code>并将位置 $6$ 的<code>(</code>变成<code>)</code>。</p>
</li>
</ul>
<h2>输入输出格式</h2>
<h4>输入格式</h4>
<p>输入文件的第一行是用空格隔开的两个正整数 $n,q$，分别表示字符串的长度和将执行的操作个数。  </p>
<p>第二行是长度为 $n$ 的初始字符串 $S$。接下来的 $q$ 行是将依次执行的$q$个操作，其中操作名与操作数之间以及相邻操作数之间均用空格隔开。</p>
<h4>输出格式</h4>
<p>对于每个 <code>Query</code> 操作，输出一行一个整数表示答案。输入数据保证有解。</p>
<h2>输入输出样例</h2>
<h4>输入样例 #1</h4>
<p>4 5
((((
Replace 1 2 )
Query 1 2
Swap 2 3
Invert 3 4
Query 1 4</p>
<h4>输出样例 #1</h4>
<p>1
2</p>
<h2>说明</h2>
<h3>样例解释</h3>
<p>输入中有 $2$ 个 <code>Query</code> 操作，所以输出有 $2$ 行。 <br />
执行第一个 <code>Query</code> 操作时的括号序列为 <code>))((</code>，因改变第 $1$ 位可使 $[1,2]$ 之间的字符串变成合法的括号序列，故输出的第一行为 <code>1</code>。  </p>
<p>执行第二个 <code>Query</code> 操作时的括号序列为 <code>)(()</code>，因要改变第 $1$ 位和第 $2$ 位才能使 $[1,4]$ 之间的字符串变成合法的括号序列，故输出的第二行为 <code>2</code>。</p>
<h3>数据范围</h3>
<p>对于 $30\%$ 的数据，$1\le n,q \le 3000$； <br />
对于 $100\%$ 的数据，$1\le n,q \le 10^5$。</p>